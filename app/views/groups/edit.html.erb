<h2>Edit this Group:</h2>

<%= form_tag "/groups/#{@group.id}", method: :patch do %>
  <div class="form-group">
    <%= label_tag :name %>
    <%= text_field_tag :name, @group.name, class: "form-control" %>
  </div>
  <div class="form-group">
    <label>Field 1</label>
    <select class="form-control" name="field_id_1" required>
      <option>No field selected</option>
      <% @fields.each do |field| %>
        <option value="<%= field.id %>" class="field-id-1"><%= field.name %></option>
      <% end %>
    </select>
  </div>
  <div class="form-group">
    <label>Field 2 (optional)</label>
    <select class="form-control" name="field_id_2">
      <option value="">No field selected</option>
      <% @fields.each do |field| %>
        <option value="<%= field.id %>" class="field-id-2"><%= field.name %></option>
      <% end %>
    </select>
  </div>
  <div class="form-group">
    <label>Field 3 (optional)</label>
    <select class="form-control" name="field_id_3">
      <option value="">No field selected</option>
      <% @fields.each do |field| %>
        <option value="<%= field.id %>" class="field-id-3"><%= field.name %></option>
      <% end %>
    </select>
  </div>
  <div class="form-group">
    <label>Group Type</label>
    <select class="form-control" name="group_type">
            <option value="Pickup">Pickup</option>
            <option value="League">League</option>
            <option value="Other">Other (Elaborate in Description)</option>
    </select>
  </div>
  <div class="form-group">
    <%= label_tag :description %>
    <%= text_field_tag :description, @group.description, class: "form-control" %>
  </div>
  <div>
    <%= button_tag 'Submit', class: "btn btn-default" %>
    <a href="/groups"><button class="btn btn-default">Back</button></a>
  </div>
<% end %>


<script type="text/javascript">
$(document).ready(function () {
  var fields = $(".field-id-1");
  for (var i = 0; i <= fields.length; i++) {
    var field = fields[i];
    if ($(field).val() === "<%= @group.field_id_1 %>") {
      field.setAttribute('selected', true);
    }
  }
  var fields = $(".field-id-2");
  for (var i = 0; i <= fields.length; i++) {
    var field = fields[i];
    if ($(field).val() === "<%= @group.field_id_2 %>") {
      field.setAttribute('selected', true);
    }
  }  var fields = $(".field-id-3");
  for (var i = 0; i <= fields.length; i++) {
    var field = fields[i];
    if ($(field).val() === "<%= @group.field_id_3 %>") {
      field.setAttribute('selected', true);
    }
  }});
</script>